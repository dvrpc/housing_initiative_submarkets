apply(., 2, median)
print(joined_df_clean_medians)
# Export 1
e1 <- joined_df_clean %>%
estimate_profiles(8)
export_1 <- get_data(e1)
# Subset columns
reduced_df <- export_1[myVars_Class]
# Append index
rownames(reduced_df) <- tracts
# Write csv
write.csv(reduced_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\lpa_results_3_submarkets.csv", row.names = TRUE)
# Group by cluster and get median
submarket_medians <- aggregate(reduced_df, by = list(reduced_df$Class), FUN = "median")%>%
subset(select = -c(Group.1))
# Export cluster medians
write.csv(submarket_medians, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\cluster_medians.csv")
View(submarket_medians)
rownames(reduced_df) <- tracts
tracts <- row.names(joined_df_clean)
joined_df_clean <- joined_df %>%
select(all_of(myVars)) %>%
mutate_if(is.numeric, function(x) ifelse(is.na(x), median(x, na.rm = T), x))
joined_df_clean_medians <- joined_df_clean %>%
apply(., 2, median)
print(joined_df_clean_medians)
# Export 1
e1 <- joined_df_clean %>%
estimate_profiles(8)
export_1 <- get_data(e1)
# Subset columns
reduced_df <- export_1[myVars_Class]
# Append index
rownames(reduced_df) <- tracts
View(reduced_df)
write.csv(reduced_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\lpa_results_3_submarkets.csv", row.names = TRUE)
write.csv(reduced_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\lpa_results_3_submarkets.csv", row.names = TRUE)
View(joined_df_clean)
View(acs2020_raw)
setwd("C:\\Users\\bcarney\\Documents\\GitHub\\housing_initiative_submarkets\\R")
View(acs2020_raw)
setwd("C:\\Users\\bcarney\\Documents\\GitHub\\housing_initiative_submarkets\\R")
library(tidyverse)
library(dplyr)
library(rgdal)
library(tidycensus)
library(censusapi)
census_api_key("e6cd8f90ccb0acacdfa5373911a2e73b96dbd792", install=TRUE, overwrite=TRUE)
readRenviron("~/.Renviron")
fips_region <- c("34005", "34007", "34015", "34021", "42017", "42029", "42045", "42091", "42101")
acs5_varlist_2020 <- load_variables(year = 2020,
dataset = "acs5",
cache = TRUE)
acs5_20_vars_tot <- c(
### POPULATION AND UNITS ###
# Total Population (Total Population)
POP_TOT = "B01003_001",
# Total Households
HH_TOT = "B11001_001",
# Median Household Income
HHINC_MED = "B19013_001",
# Household Income Tiers,
HHI_U10 = "B19001_002",
HHI_1015 = "B19001_003",
HHI_1520 = "B19001_004",
HHI_2025 = "B19001_005",
HHI_2530 = "B19001_006",
HHI_3035 = "B19001_007",
HHI_3540 = "B19001_008",
HHI_4045 = "B19001_009",
HHI_4550 = "B19001_010",
HHI_5060 = "B19001_011",
HHI_6075 = "B19001_012",
HHI_75100 = "B19001_013",
HHI_100125 = "B19001_014",
HHI_125150 = "B19001_015",
HHI_150200 = "B19001_016",
HHI_200P = "B19001_017",
# Occupancy Status (Housing Units)
UNITS_TOT = "B25002_001",
UNITS_OCC = "B25002_002",
UNITS_VAC = "B25002_003",
# Tenure (Occupied Housing Units)
TEN_TOT = "B25003_001",
TEN_O = "B25003_002",
TEN_R = "B25003_003",
### HOUSING STOCK ###
# Units in Structure (Occupied Housing Units)
UNITS_STR = "B25024_001",
UNIT_1DET = "B25024_002",
UNIT_1ATT = "B25024_003",
UNIT_2 = "B25024_004",
UNIT_3or4 = "B25024_005",
UNIT_5to9 = "B25024_006",
UNIT_1019 = "B25024_007",
UNIT_2049 = "B25024_008",
UNIT_50P = "B25024_009",
UNIT_MOB = "B25024_010",
UNIT_OTH = "B25024_011",
# Units in Structure (by Tenure)
# Note: Must tabulate by tenure IOT return occupied (not total) housing units
O_1DET = "B25032_003",
O_1ATT = "B25032_004",
O_2 = "B25032_005",
O_3to4 = "B25032_006",
O_5to9 = "B25032_007",
O_10to19 = "B25032_008",
O_20to49 = "B25032_009",
O_50more = "B25032_010",
R_1DET = "B25032_014",
R_1ATT = "B25032_015",
R_2 = "B25032_016",
R_3to4 = "B25032_017",
R_5to9 = "B25032_018",
R_10to19 = "B25032_019",
R_20to49 = "B25032_020",
R_50more = "B25032_021",
# Bedrooms (Occupied Housing Units)
BED_OWN_0 = "B25042_003",
BED_OWN_1 = "B25042_004",
BED_OWN_2 = "B25042_005",
BED_OWN_3 = "B25042_006",
BED_OWN_4 = "B25042_007",
BED_OWN_5more = "B25042_008",
BED_RENT_0 = "B25042_010",
BED_RENT_1 = "B25042_011",
BED_RENT_2 = "B25042_012",
BED_RENT_3 = "B25042_013",
BED_RENT_4 = "B25042_014",
BED_RENT_5more = "B25042_015",
# Year Built
YB_MED = "B25035_001",
YB_14L = "B25034_002",
YB_10to13 = "B25034_003",
YB_00to09 = "B25034_004",
YB_90to99 = "B25034_005",
YB_80to89 = "B25034_006",
YB_70to79 = "B25034_007",
YB_60to69 = "B25034_008",
YB_50to59 = "B25034_009",
YB_40to49 = "B25034_010",
YB_39E = "B25034_011",
### HOUSING MARKET ###
# Median Gross Rent (Renter-Occupied Housing Units Paying Cash Rent)
RENT_MED = "B25064_001",
# Gross Rent as a Percentage of Household Income (Renter-Occupied Housing Units)
RPI_00to09 = "B25070_002",
RPI_10to14 = "B25070_003",
RPI_15to19 = "B25070_004",
RPI_20to24 = "B25070_005",
RPI_25to29 = "B25070_006",
RPI_30to34 = "B25070_007",
RPI_35to39 = "B25070_008",
RPI_40to49 = "B25070_009",
RPI_50more = "B25070_010",
RPI_NA = "B25070_011",
# Median Selected Monthly Owner Costs (Owner-Occupied Housing Units)
COST_OWN_MED = "B25088_001",
# Selected Monthly Owner Costs by Mortgage Status (Owner-Occupied Housing Units)
OPI_00to09 = "B25091_003",
OPI_10to14 = "B25091_004",
OPI_15to19 = "B25091_005",
OPI_20to24 = "B25091_006",
OPI_25to29 = "B25091_007",
OPI_30to34 = "B25091_008",
OPI_35to39 = "B25091_009",
OPI_40to49 = "B25091_010",
OPI_50more = "B25091_011",
OPI_NA = "B25091_012",
# Median Monthly Housing Costs (Occupied Housing Units with Monthly Housing Costs)
COST_MED = "B25105_001",
# Value by Quartile (Owner-Occupied Housing Units)
OVAL_Q1 = "B25076_001",
MED_HVAL = "B25077_001",
OVAL_Q3 = "B25078_001")
dvrpc_states <- c(34, 42)
dvrpc_fips <- c('34005|34007|34015|34021|42017|42029|42045|42091|42101')
raw_data <- get_acs(geography = "tract",
variables = acs5_20_vars_tot,
year = 2020,
state = dvrpc_states,
survey = "acs5",
output = "wide"
) %>%
mutate(year = 2020) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, year, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$",""))
submarket_tracts <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\lpa_results_3_submarkets.csv")
View(submarket_tracts)
View(raw_data)
summary_df <- raw_data%>%
select(GEOID, UNITS_TOT, POP_TOT, HH_TOT)
summary_df <- raw_data %>%
select(GEOID, UNITS_TOT, POP_TOT, HH_TOT)
library(dplyr)
summary_df <- raw_data %>%
select(GEOID, UNITS_TOT, POP_TOT, HH_TOT)
View(summary_df)
write.csv(summary_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\submarkets_summary_df.csv", row.names = FALSE)
reduced_df %>%
single_imputation() %>%
estimate_profiles(4:10,
variances = c("equal", "varying"),
covariances = c("zero", "varying")) %>%
compare_solutions(statistics = c("AIC", "BIC"))
library(dplyr)
setwd("C:\\Users\\bcarney\\Documents\\GitHub\\housing_initiative_submarkets\\R")
# Install Packages
# install.packages("tidyLPA")
# install.packages("magrittr")
# install.packages("matrixStats")
# install.packages("textshape")
# install.packages("tidyr")
# Import libraries
library(tidyLPA)
library(dplyr)
library(magrittr)
library(matrixStats)
library(textshape)
library(tidyr)
# Import data
acs2020_raw <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\acs5_2020_variables.csv", colClasses = c("GEOID"="character"))
mediansaleprice_subsidizedhousing <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\region_tracts_mediansaleprice_subsidizedhousingunits.csv", colClasses = c("geoid"="character")) %>%
rename(subsidizedunits = region_subsidizedhousing_unitsbytract_Total.Subsidized.Units) %>%
mutate(subsidizedunits = ifelse(is.na(subsidizedunits), 0, subsidizedunits))
# Join dataframes
joined_df <- merge(acs2020_raw, mediansaleprice_subsidizedhousing, by.x="GEOID", by.y="geoid") %>%
drop_na(med16, med21) %>%
filter(HH_TOT > 0) %>%
mutate(pct_subsidized = round((subsidizedunits/UNITS_TOT) * 100, 2)) %>%
column_to_rownames(., "GEOID")
myVars <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre")
myVars_Class <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre", "Class")
tracts <- row.names(joined_df_clean)
joined_df_clean <- joined_df %>%
select(all_of(myVars)) %>%
mutate_if(is.numeric, function(x) ifelse(is.na(x), median(x, na.rm = T), x))
joined_df_clean_medians <- joined_df_clean %>%
apply(., 2, median)
print(joined_df_clean_medians)
# Export 1
e1 <- joined_df_clean %>%
estimate_profiles(8)
export_1 <- get_data(e1)
# Subset columns
reduced_df <- export_1[myVars_Class]
# Append index
rownames(reduced_df) <- tracts
# Write csv
write.csv(reduced_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\lpa_results_3_submarkets.csv", row.names = TRUE)
# Group by cluster and get median
submarket_medians <- aggregate(reduced_df, by = list(reduced_df$Class), FUN = "median")%>%
subset(select = -c(Group.1))
reduced_df %>%
single_imputation() %>%
estimate_profiles(4:10,
variances = c("equal", "varying"),
covariances = c("zero", "varying")) %>%
compare_solutions(statistics = c("AIC", "BIC"))
install.packages("mplus")
View(reduced_df)
suppressMessages(library(tidyLPA))
suppressMessages(mod_1c_v1 <- estimate_profiles(df = reduced_df[1:20], n_profiles = 1:10,
models = 1))
View(reduced_df)
install.packages("mclust")
install.packages("mclust")
library(mclust)
mnames <- c("EEI", "EEE", "VVI", "VVV")
mod_g1_9 <- Mclust(reduced_df[,1:19], modelNames = mnames)
View(mod_g1_9)
mod_g1_9$G
mnames <- c("EEI", "EEE", "VVI", "VVV")
mod_g1_9 <- Mclust(reduced_df[,1:10], modelNames = mnames)
mod_g1_9$G
mod_g1_9$BIC
reduced_df %>%
select(myVars) %>%
single_imputation() %>%
estimate_profiles(1:10,
variances = c("equal", "varying"),
covariances = c("zero", "varying")) %>%
compare_solutions(statistics = c("AIC", "BIC"))
library(dplyr)
reduced_df %>%
select(myVars) %>%
single_imputation() %>%
estimate_profiles(1:10,
variances = c("equal", "varying"),
covariances = c("zero", "varying")) %>%
compare_solutions(statistics = c("AIC", "BIC"))
library(tidyLPA)
reduced_df %>%
select(myVars) %>%
single_imputation() %>%
estimate_profiles(1:10,
variances = c("equal", "varying"),
covariances = c("zero", "varying")) %>%
compare_solutions(statistics = c("AIC", "BIC"))
library(mclust)
suppressMessages(library(tidyLPA))
suppressMessages(mod_1c_v1 <- estimate_profiles(df = joined_df_clean[1:10], n_profiles = 1:9,
models = 1))
View(mod_1c_v1)
mod_1c_v1
compare_solutions(mod_1c_v1)
suppressMessages(library(tidyLPA))
suppressMessages(mod_1c_v1 <- estimate_profiles(df = joined_df_clean[1:15], n_profiles = 1:9,
models = 1))
mod_1c_v1
suppressMessages(library(tidyLPA))
suppressMessages(mod_1c_v1 <- estimate_profiles(df = joined_df_clean[1:19], n_profiles = 1:15,
models = 1))
mod_1c_v1
compare_solutions(mod_1c_v1)
suppressMessages(library(tidyLPA))
suppressMessages(mod_1c_v1 <- estimate_profiles(df = joined_df_clean[1:19], n_profiles = 1:20,
models = 1))
# Last updated: 11/15/2022
# Purpose: This script runs a Latent Profile Analysis clustering algorithm on data inputs used for the Regional Housing Initiative submarkets.
# Set working directory
setwd("C:\\Users\\bcarney\\Documents\\GitHub\\housing_initiative_submarkets\\R")
# Install Packages
# install.packages("tidyLPA")
# install.packages("magrittr")
# install.packages("matrixStats")
# install.packages("textshape")
# install.packages("tidyr")
# install.packages("mplus")
# Import libraries
library(tidyLPA)
library(dplyr)
library(magrittr)
library(matrixStats)
library(textshape)
library(tidyr)
# Import data
acs2020_raw <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\acs5_2020_variables.csv", colClasses = c("GEOID"="character"))
mediansaleprice_subsidizedhousing <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\region_tracts_mediansaleprice_subsidizedhousingunits.csv", colClasses = c("geoid"="character")) %>%
rename(subsidizedunits = region_subsidizedhousing_unitsbytract_Total.Subsidized.Units) %>%
mutate(subsidizedunits = ifelse(is.na(subsidizedunits), 0, subsidizedunits))
# Join dataframes
joined_df <- merge(acs2020_raw, mediansaleprice_subsidizedhousing, by.x="GEOID", by.y="geoid") %>%
drop_na(med16, med21) %>%
filter(HH_TOT > 0) %>%
mutate(pct_subsidized = round((subsidizedunits/UNITS_TOT) * 100, 2)) %>%
column_to_rownames(., "GEOID")
myVars <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre")
myVars_Class <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre", "Class")
tracts <- row.names(joined_df_clean)
joined_df_clean <- joined_df %>%
select(all_of(myVars)) %>%
mutate_if(is.numeric, function(x) ifelse(is.na(x), median(x, na.rm = T), x))
joined_df_clean_medians <- joined_df_clean %>%
apply(., 2, median)
print(joined_df_clean_medians)
# Export 1
e1 <- joined_df_clean %>%
estimate_profiles(7)
export_1 <- get_data(e1)
# Subset columns
reduced_df <- export_1[myVars_Class]
# Append index
rownames(reduced_df) <- tracts
# Write csv
write.csv(reduced_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_7_Submarkets_Test1\\lpa_7_submarkets_results_1.csv", row.names = TRUE)
# Group by cluster and get median
submarket_medians <- aggregate(reduced_df, by = list(reduced_df$Class), FUN = "median")%>%
subset(select = -c(Group.1))
# Export cluster medians
write.csv(submarket_medians, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_7_Submarkets_Test1\\cluster_medians.csv")
# Last updated: 10/12/2022
# Purpose: This script runs a Latent Profile Analysis clustering algorithm on data inputs used for the Regional Housing Initiative submarkets.
# Set working directory
setwd("C:\\Users\\bcarney\\Documents\\GitHub\\housing_initiative_submarkets\\R")
# Install Packages
# install.packages("tidyLPA")
# install.packages("magrittr")
# install.packages("matrixStats")
# install.packages("textshape")
# install.packages("tidyr")
install.packages("mplus")
# Import libraries
library(tidyLPA)
library(dplyr)
library(magrittr)
library(matrixStats)
library(textshape)
library(tidyr)
# Import data
acs2020_raw <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\acs5_2020_variables.csv", colClasses = c("GEOID"="character"))
mediansaleprice_subsidizedhousing <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\region_tracts_mediansaleprice_subsidizedhousingunits.csv", colClasses = c("geoid"="character")) %>%
rename(subsidizedunits = region_subsidizedhousing_unitsbytract_Total.Subsidized.Units) %>%
mutate(subsidizedunits = ifelse(is.na(subsidizedunits), 0, subsidizedunits))
# Join dataframes
joined_df <- merge(acs2020_raw, mediansaleprice_subsidizedhousing, by.x="GEOID", by.y="geoid") %>%
drop_na(med16, med21) %>%
filter(HH_TOT > 0) %>%
mutate(pct_subsidized = round((subsidizedunits/UNITS_TOT) * 100, 2)) %>%
column_to_rownames(., "GEOID")
myVars <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre")
myVars_Class <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre", "Class")
tracts <- row.names(joined_df_clean)
joined_df_clean <- joined_df %>%
select(all_of(myVars)) %>%
mutate_if(is.numeric, function(x) ifelse(is.na(x), median(x, na.rm = T), x))
joined_df_clean_medians <- joined_df_clean %>%
apply(., 2, median)
print(joined_df_clean_medians)
# Export 1
e1 <- joined_df_clean %>%
estimate_profiles(8)
export_1 <- get_data(e1)
# Subset columns
reduced_df <- export_1[myVars_Class]
# Append index
rownames(reduced_df) <- tracts
# Write csv
write.csv(reduced_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\lpa_results_3_submarkets.csv", row.names = TRUE)
# Group by cluster and get median
submarket_medians <- aggregate(reduced_df, by = list(reduced_df$Class), FUN = "median")%>%
subset(select = -c(Group.1))
# Export cluster medians
write.csv(submarket_medians, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\cluster_medians.csv")
suppressMessages(library(tidyLPA))
suppressMessages(mod_1c_v1 <- estimate_profiles(df = joined_df_clean[1:19], n_profiles = 1:20,
models = 1))
View(reduced_df)
setwd("C:\\Users\\bcarney\\Documents\\GitHub\\housing_initiative_submarkets\\R")
library(tidyLPA)
library(dplyr)
library(magrittr)
library(matrixStats)
library(textshape)
library(tidyr)
library(mplus)
install.packages("mplus")
library(tidyLPA)
library(dplyr)
library(magrittr)
library(matrixStats)
library(textshape)
library(tidyr)
acs2020_raw <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\acs5_2020_variables.csv", colClasses = c("GEOID"="character"))
View(acs2020_raw)
mediansaleprice_subsidizedhousing <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\region_tracts_mediansaleprice_subsidizedhousingunits.csv", colClasses = c("geoid"="character")) %>%
rename(subsidizedunits = region_subsidizedhousing_unitsbytract_Total.Subsidized.Units) %>%
mutate(subsidizedunits = ifelse(is.na(subsidizedunits), 0, subsidizedunits))
View(mediansaleprice_subsidizedhousing)
joined_df <- merge(acs2020_raw, mediansaleprice_subsidizedhousing, by.x="GEOID", by.y="geoid") %>%
drop_na(med16, med21) %>%
filter(HH_TOT > 0) %>%
mutate(pct_subsidized = round((subsidizedunits/UNITS_TOT) * 100, 2)) %>%
column_to_rownames(., "GEOID")
myVars <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre")
myVars_Class <- c("HHINC_MED", "RENT_MED", "TEN_RENT", "TEN_OWN", "VCY", "HHI_150P", "YB_59E", "YB_6099", "YB_00L", "UNIT_1", "UNIT_2to4", "UNIT_5P", "pct_subsidized", "med21", "pct_diff", "HHS_1", "HHS_2to4", "HHS_5P", "hu_acre", "Class")
tracts <- row.names(joined_df_clean)
tracts <- row.names(joined_df)
joined_df_clean <- joined_df %>%
select(all_of(myVars)) %>%
mutate_if(is.numeric, function(x) ifelse(is.na(x), median(x, na.rm = T), x))
joined_df_clean_medians <- joined_df_clean %>%
apply(., 2, median)
e1 <- joined_df_clean %>%
estimate_profiles(8)
export_1 <- get_data(e1)
reduced_df <- export_1[myVars_Class]
View(reduced_df)
rownames(reduced_df) <- tracts
View(reduced_df)
write.csv(reduced_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\lpa_results_3_submarkets.csv", row.names = TRUE)
View(reduced_df)
tract_submarket_table <- reduced_df %>%
select("Class")
View(tract_submarket_table)
tract_submarket_table <- reduced_df %>%
select("GEOID", "Class")
View(reduced_df)
tract_submarket_table <- reduced_df %>%
select("Class")
rownames(tract_submarket_table) <- tracts
View(tract_submarket_table)
write.csv(tracts_submarket_table, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\tracts_submarkets.csv", row.names = TRUE)
tract_submarket_table <- reduced_df %>%
select("Class")
rownames(tract_submarket_table) <- tracts
tract_submarket_table <- reduced_df %>%
select("Class")
rownames(tract_submarket_table) <- tracts
write.csv(tract_submarket_table, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\tracts_submarkets.csv", row.names = TRUE)
tracts_submarkets <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\tracts_submarkets.csv")
View(tracts_submarkets)
View(tracts_submarkets)
tracts_submarkets <- read.csv("U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\LPA_Test3_Submarkets\\tracts_submarkets.csv", row.names = "X")
View(tracts_submarkets)
acs5_varlist_2020 <- load_variables(year = 2020,
dataset = "acs5",
cache = TRUE)
library(tidyverse)
library(dplyr)
library(rgdal)
library(tidycensus)
library(censusapi)
census_api_key("e6cd8f90ccb0acacdfa5373911a2e73b96dbd792", install=TRUE, overwrite=TRUE)
readRenviron("~/.Renviron")
fips_region <- c("34005", "34007", "34015", "34021", "42017", "42029", "42045", "42091", "42101")
#Variable List - For Reference
acs5_varlist_2020 <- load_variables(year = 2020,
dataset = "acs5",
cache = TRUE)
View(acs5_varlist_2020)
