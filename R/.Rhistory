### POPULATION AND UNITS ###
# Total Population (Total Population)
POP_TOT = "B01003_001",
# Total Households
HH_TOT = "B11001_001",
# Median Household Income
HHINC_MED = "B19013_001",
# Occupancy Status (Housing Units)
UNITS_TOT = "B25002_001",
UNITS_OCC = "B25002_002",
UNITS_VAC = "B25002_003",
# Tenure (Occupied Housing Units)
TEN_TOT = "B25003_001",
TEN_O = "B25003_002",
TEN_R = "B25003_003",
### HOUSING STOCK ###
# Units in Structure (Occupied Housing Units)
UNITS_STR = "B25024_001",
UNIT_1DET = "B25024_002",
UNIT_1ATT = "B25024_003",
UNIT_2 = "B25024_004",
UNIT_3or4 = "B25024_005",
UNIT_5to9 = "B25024_006",
UNIT_1019 = "B25024_007",
UNIT_2049 = "B25024_008",
UNIT_50P = "B25024_009",
UNIT_MOB = "B25024_010",
UNIT_OTH = "B25024_011"
)
dvrpc_states <- c(34, 42)
dvrpc_fips <- c('^34005|^34007|^34015|^34021|^42017|^42029|^42045|^42091|^42101')
raw_data_15 <- get_acs(geography = "county",
variables = acs5_15_vars_tot,
year = 2015,
state = dvrpc_states,
survey = "acs5",
output = "wide"
)
raw_data_15 <- get_acs(geography = "county",
variables = acs5_15_vars_tot,
year = 2015,
state = dvrpc_states,
survey = "acs5",
output = "wide"
) %>%
mutate(year = 2015) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, year, ends_with("E"), -NAME)%>%
rename("GEOID_10" = "GEOID") %>%
`colnames<-`(str_replace(colnames(.),"E$",""))
View(raw_data_15)
# ---- Define Variables ----
acs5_vars_tot <- c(
### POPULATION AND UNITS ###
# Total Population (Total Population)
POP_TOT = "B01003_001",
# Total Households
HH_TOT = "B11001_001",
# Median Household Income
HHINC_MED = "B19013_001",
# Occupancy Status (Housing Units)
UNITS_TOT = "B25002_001",
UNITS_OCC = "B25002_002",
UNITS_VAC = "B25002_003",
# Tenure (Occupied Housing Units)
TEN_TOT = "B25003_001",
TEN_O = "B25003_002",
TEN_R = "B25003_003",
### HOUSING STOCK ###
# Units in Structure (Occupied Housing Units)
UNITS_STR = "B25024_001",
UNIT_1DET = "B25024_002",
UNIT_1ATT = "B25024_003",
UNIT_2 = "B25024_004",
UNIT_3or4 = "B25024_005",
UNIT_5to9 = "B25024_006",
UNIT_1019 = "B25024_007",
UNIT_2049 = "B25024_008",
UNIT_50P = "B25024_009",
UNIT_MOB = "B25024_010",
UNIT_OTH = "B25024_011"
)
dvrpc_states <- c(34, 42)
dvrpc_fips <- c('^34005|^34007|^34015|^34021|^42017|^42029|^42045|^42091|^42101')
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
mutate(year = 2015) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, year, ends_with("E"), -NAME)%>%
rename("GEOID_10" = "GEOID") %>%
`colnames<-`(str_replace(colnames(.),"E$",""))
View(raw_data_11)
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
mutate(year = 2015) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, year, ends_with("E"), -NAME)%>%
rename("GEOID_10" = "GEOID") %>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P")
# Load Census API key
census_api_key("e6cd8f90ccb0acacdfa5373911a2e73b96dbd792", install=TRUE, overwrite=TRUE)
readRenviron("~/.Renviron")
# Variable List - For Reference
acs5_varlist <- load_variables(year = 2015,
dataset = "acs5",
cache = TRUE)
# ---- Define Variables ----
acs5_vars_tot <- c(
### POPULATION AND UNITS ###
# Total Population (Total Population)
POP_TOT = "B01003_001",
# Total Households
HH_TOT = "B11001_001",
# Median Household Income
HHINC_MED = "B19013_001",
# Occupancy Status (Housing Units)
UNITS_TOT = "B25002_001",
UNITS_OCC = "B25002_002",
UNITS_VAC = "B25002_003",
# Tenure (Occupied Housing Units)
TEN_TOT = "B25003_001",
TEN_O = "B25003_002",
TEN_R = "B25003_003",
### HOUSING STOCK ###
# Units in Structure (Occupied Housing Units)
UNITS_STR = "B25024_001",
UNIT_1DET = "B25024_002",
UNIT_1ATT = "B25024_003",
UNIT_2 = "B25024_004",
UNIT_3or4 = "B25024_005",
UNIT_5to9 = "B25024_006",
UNIT_1019 = "B25024_007",
UNIT_2049 = "B25024_008",
UNIT_50P = "B25024_009",
UNIT_MOB = "B25024_010",
UNIT_OTH = "B25024_011"
)
dvrpc_states <- c(34, 42)
dvrpc_fips <- c('^34005|^34007|^34015|^34021|^42017|^42029|^42045|^42091|^42101')
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
mutate(year = 2015) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, year, ends_with("E"), -NAME)%>%
rename("GEOID_10" = "GEOID") %>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P")
View(raw_data_11)
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, year, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P")
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P")
raw_data_21 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2021,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$",""))
View(raw_data_21)
View(raw_data_11)
# ---- Define Variables ----
acs5_vars_tot <- c(
# Units in Structure (Occupied Housing Units)
UNITS_STR = "B25024_001",
UNIT_1DET = "B25024_002",
UNIT_1ATT = "B25024_003",
UNIT_2 = "B25024_004",
UNIT_3or4 = "B25024_005",
UNIT_5to9 = "B25024_006",
UNIT_1019 = "B25024_007",
UNIT_2049 = "B25024_008",
UNIT_50P = "B25024_009",
UNIT_MOB = "B25024_010",
UNIT_OTH = "B25024_011"
)
dvrpc_states <- c(34, 42)
dvrpc_fips <- c('^34005|^34007|^34015|^34021|^42017|^42029|^42045|^42091|^42101')
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P")
raw_data_21 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2021,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$",""))
View(raw_data_11)
View(raw_data_11)
# ---- Define Variables ----
acs5_vars_tot <- c(
# Units in Structure (Occupied Housing Units)
UNITS_STR = "B25024_001",
UNIT_1DET = "B25024_002",
UNIT_1ATT = "B25024_003",
UNIT_2 = "B25024_004",
UNIT_3or4 = "B25024_005",
UNIT_5to9 = "B25024_006",
UNIT_1019 = "B25024_007",
UNIT_2049 = "B25024_008",
UNIT_50P = "B25024_009",
UNIT_MOB = "B25024_010")
dvrpc_states <- c(34, 42)
dvrpc_fips <- c('^34005|^34007|^34015|^34021|^42017|^42029|^42045|^42091|^42101')
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P") %>%
rename("UNIT_MOB_11" = "UNIT_MOB")
raw_data_21 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2021,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$",""))
View(raw_data_21)
chg_df <- left_join(raw_data_11, raw_data_21, by=GEOID)
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID")
View(chg_df)
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_STR_11" = "UNIT_STR")
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P") %>%
rename("UNIT_MOB_11" = "UNIT_MOB")
raw_data_21 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2021,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$",""))
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID")
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNIT_STR_11" = "UNIT_STR") %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P") %>%
rename("UNIT_MOB_11" = "UNIT_MOB")
raw_data_21 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2021,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$",""))
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID")
View(chg_df)
raw_data_11 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2011,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$","")) %>%
rename("UNITS_STR_11" = "UNITS_STR") %>%
rename("UNIT_1DET_11" = "UNIT_1DET") %>%
rename("UNIT_1ATT_11" = "UNIT_1ATT") %>%
rename("UNIT_2_11" = "UNIT_2") %>%
rename("UNIT_3or4_11" = "UNIT_3or4") %>%
rename("UNIT_5to9_11" = "UNIT_5to9") %>%
rename("UNIT_1019_11" = "UNIT_1019") %>%
rename("UNIT_2049_11" = "UNIT_2049") %>%
rename("UNIT_50P_11" = "UNIT_50P") %>%
rename("UNIT_MOB_11" = "UNIT_MOB")
raw_data_21 <- get_acs(geography = "county",
variables = acs5_vars_tot,
year = 2021,
state = dvrpc_states,
survey = "acs1",
output = "wide"
) %>%
filter(str_detect(GEOID, dvrpc_fips)) %>%
select(GEOID, ends_with("E"), -NAME)%>%
`colnames<-`(str_replace(colnames(.),"E$",""))
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID")
View(chg_df)
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum))
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum))
View(chg_df)
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
mutate(UNITS_STR_CHG = round((UNITS_STR - UNITS_STR_11)/UNITS_STR_11, 1)) %>%
mutate(UNIT_1DET_CHG = round((UNIT_1DET - UUNIT_1DET_11)/UNIT_1DET_11, 1)) %>%
mutate(UNIT_1ATT_CHG = round((UNIT_1ATT - UNIT_1ATT_11)/UNIT_1ATT_11, 1)) %>%
mutate(UNIT_2_CHG = round((UNIT_2 - UNIT_2_11)/UNIT_2_11, 1)) %>%
mutate(UNIT_3to4_CHG = round((UNIT_3to4 - UNIT_3to4_11)/UNIT_3to4_11, 1)) %>%
mutate(UNIT_5to9_CHG = round((UNIT_5to9 - UNIT_5to9_11)/UNIT_5to9_11, 1)) %>%
mutate(UNIT_1019_CHG = round((UNIT_1019 - UNIT_1019_11)/UNIT_1019_11, 1)) %>%
mutate(UNIT_2049_CHG = round((UNIT_2049 - UNIT_2049_11)/UNIT_2049_11, 1)) %>%
mutate(UNIT_50P_CHG = round((UNIT_50P - UNIT_50P_11)/UNIT_50P_11, 1)) %>%
mutate(UNIT_MOB_CHG = round((UNIT_MOB - UNIT_MOB_11)/UNIT_MOB_11, 1))
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
mutate(UNITS_STR_CHG = round((UNITS_STR - UNITS_STR_11)/UNITS_STR_11, 1)) %>%
mutate(UNIT_1DET_CHG = round((UNIT_1DET - UNIT_1DET_11)/UNIT_1DET_11, 1)) %>%
mutate(UNIT_1ATT_CHG = round((UNIT_1ATT - UNIT_1ATT_11)/UNIT_1ATT_11, 1)) %>%
mutate(UNIT_2_CHG = round((UNIT_2 - UNIT_2_11)/UNIT_2_11, 1)) %>%
mutate(UNIT_3to4_CHG = round((UNIT_3to4 - UNIT_3to4_11)/UNIT_3to4_11, 1)) %>%
mutate(UNIT_5to9_CHG = round((UNIT_5to9 - UNIT_5to9_11)/UNIT_5to9_11, 1)) %>%
mutate(UNIT_1019_CHG = round((UNIT_1019 - UNIT_1019_11)/UNIT_1019_11, 1)) %>%
mutate(UNIT_2049_CHG = round((UNIT_2049 - UNIT_2049_11)/UNIT_2049_11, 1)) %>%
mutate(UNIT_50P_CHG = round((UNIT_50P - UNIT_50P_11)/UNIT_50P_11, 1)) %>%
mutate(UNIT_MOB_CHG = round((UNIT_MOB - UNIT_MOB_11)/UNIT_MOB_11, 1))
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
mutate(UNITS_STR_CHG = round((UNITS_STR - UNITS_STR_11)/UNITS_STR_11, 1)) %>%
mutate(UNIT_1DET_CHG = round((UNIT_1DET - UNIT_1DET_11)/UNIT_1DET_11, 1)) %>%
mutate(UNIT_1ATT_CHG = round((UNIT_1ATT - UNIT_1ATT_11)/UNIT_1ATT_11, 1)) %>%
mutate(UNIT_2_CHG = round((UNIT_2 - UNIT_2_11)/UNIT_2_11, 1)) %>%
mutate(UNIT_3or4_CHG = round((UNIT_3or4 - UNIT_3or4_11)/UNIT_3to4_11, 1)) %>%
mutate(UNIT_5to9_CHG = round((UNIT_5to9 - UNIT_5to9_11)/UNIT_5to9_11, 1)) %>%
mutate(UNIT_1019_CHG = round((UNIT_1019 - UNIT_1019_11)/UNIT_1019_11, 1)) %>%
mutate(UNIT_2049_CHG = round((UNIT_2049 - UNIT_2049_11)/UNIT_2049_11, 1)) %>%
mutate(UNIT_50P_CHG = round((UNIT_50P - UNIT_50P_11)/UNIT_50P_11, 1)) %>%
mutate(UNIT_MOB_CHG = round((UNIT_MOB - UNIT_MOB_11)/UNIT_MOB_11, 1))
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
mutate(UNITS_STR_CHG = round((UNITS_STR - UNITS_STR_11)/UNITS_STR_11, 1)) %>%
mutate(UNIT_1DET_CHG = round((UNIT_1DET - UNIT_1DET_11)/UNIT_1DET_11, 1)) %>%
mutate(UNIT_1ATT_CHG = round((UNIT_1ATT - UNIT_1ATT_11)/UNIT_1ATT_11, 1)) %>%
mutate(UNIT_2_CHG = round((UNIT_2 - UNIT_2_11)/UNIT_2_11, 1)) %>%
mutate(UNIT_3or4_CHG = round((UNIT_3or4 - UNIT_3or4_11)/UNIT_3or4_11, 1)) %>%
mutate(UNIT_5to9_CHG = round((UNIT_5to9 - UNIT_5to9_11)/UNIT_5to9_11, 1)) %>%
mutate(UNIT_1019_CHG = round((UNIT_1019 - UNIT_1019_11)/UNIT_1019_11, 1)) %>%
mutate(UNIT_2049_CHG = round((UNIT_2049 - UNIT_2049_11)/UNIT_2049_11, 1)) %>%
mutate(UNIT_50P_CHG = round((UNIT_50P - UNIT_50P_11)/UNIT_50P_11, 1)) %>%
mutate(UNIT_MOB_CHG = round((UNIT_MOB - UNIT_MOB_11)/UNIT_MOB_11, 1))
View(chg_df)
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
mutate(UNITS_STR_CHG = round((100 * (UNITS_STR - UNITS_STR_11)/UNITS_STR_11), 1)) %>%
mutate(UNIT_1DET_CHG = round((100 * (UNIT_1DET - UNIT_1DET_11)/UNIT_1DET_11), 1)) %>%
mutate(UNIT_1ATT_CHG = round((100 * (UNIT_1ATT - UNIT_1ATT_11)/UNIT_1ATT_11), 1)) %>%
mutate(UNIT_2_CHG = round((100 * (UNIT_2 - UNIT_2_11)/UNIT_2_11), 1)) %>%
mutate(UNIT_3or4_CHG = round((100 * (UNIT_3or4 - UNIT_3or4_11)/UNIT_3or4_11), 1)) %>%
mutate(UNIT_5to9_CHG = round((100 * (UNIT_5to9 - UNIT_5to9_11)/UNIT_5to9_11), 1)) %>%
mutate(UNIT_1019_CHG = round((100 * (UNIT_1019 - UNIT_1019_11)/UNIT_1019_11), 1)) %>%
mutate(UNIT_2049_CHG = round((100 * (UNIT_2049 - UNIT_2049_11)/UNIT_2049_11), 1)) %>%
mutate(UNIT_50P_CHG = round((100 * (UNIT_50P - UNIT_50P_11)/UNIT_50P_11), 1)) %>%
mutate(UNIT_MOB_CHG = round((100 * (UNIT_MOB - UNIT_MOB_11)/UNIT_MOB_11), 1))
View(chg_df)
write.csv(chg_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\units_in_structure_region_2011_2021.csv")
chg_df <- left_join(raw_data_11, raw_data_21, by="GEOID") %>%
select(-GEOID) %>%
summarise(across(everything(), sum)) %>%
mutate(UNITS_STR_CHG = round((UNITS_STR - UNITS_STR_11)/UNITS_STR_11, 3)) %>%
mutate(UNIT_1DET_CHG = round((UNIT_1DET - UNIT_1DET_11)/UNIT_1DET_11, 3)) %>%
mutate(UNIT_1ATT_CHG = round((UNIT_1ATT - UNIT_1ATT_11)/UNIT_1ATT_11, 3)) %>%
mutate(UNIT_2_CHG = round((UNIT_2 - UNIT_2_11)/UNIT_2_11, 3)) %>%
mutate(UNIT_3or4_CHG = round((UNIT_3or4 - UNIT_3or4_11)/UNIT_3or4_11, 3)) %>%
mutate(UNIT_5to9_CHG = round((UNIT_5to9 - UNIT_5to9_11)/UNIT_5to9_11, 3)) %>%
mutate(UNIT_1019_CHG = round((UNIT_1019 - UNIT_1019_11)/UNIT_1019_11, 3)) %>%
mutate(UNIT_2049_CHG = round((UNIT_2049 - UNIT_2049_11)/UNIT_2049_11, 3)) %>%
mutate(UNIT_50P_CHG = round((UNIT_50P - UNIT_50P_11)/UNIT_50P_11, 3)) %>%
mutate(UNIT_MOB_CHG = round((UNIT_MOB - UNIT_MOB_11)/UNIT_MOB_11, 3))
View(chg_df)
write.csv(chg_df, "U:\\FY2022\\Planning\\RegionalHousingInitiative\\SubmarketAnalysis\\data\\units_in_structure_region_2011_2021.csv")
